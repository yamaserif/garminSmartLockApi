# スマートロック操作盤(Web API)

## SESAMI API機能 (OS 2)
### ★設定項目
- APIの設定
    1. APIの動作モード
- SESAME API使用時の設定
    1. SESAMEの履歴に表示される端末名
    2. SesameのQRコードを読み取った際の文字列(権限がマネジャー以上のもの)
    3. SesameのAPIキー

### APIの動作モード
    SESAME API機能を使用する場合は動作モードを「SESAME API」に設定してください。

### SESAMEの履歴に表示される端末名
    SESAMEの履歴画面に表示される名前です。  
    任意の名前に設定してください。（動作自体には影響しません）

### SesameのQRコードを読み取った際の文字列(権限がマネジャー以上のもの)
    SESAMEのアプリから生成したQRコードの文字列です。
    1. セサミの鍵をシェアする機能から、マネジャー以上の権限でQRコードを生成します。
    2. 生成されたQRコードを任意のQRコードリーダーで読み取ってください。(ssm://から始まる文字列になります)

### SesameのAPIキー
    SESAME APIを使用するためのAPIキーです。
    APIキーは以下のページから取得できます。
    https://partners.candyhouse.co/login/

---

## カスタムAPI機能
### ★設定項目
- APIの設定
    1. APIの動作モード
- 現在状態取得機能の設定
    1. WebAPI呼び出しURI(現在状態取得)
    2. WebAPIのメソッド(現在状態取得)
    3. 現在状態取得WebAPIのパラメータnのキー
    4. 現在状態取得WebAPIのパラメータnの値
    5. 現在状態取得WebAPIのヘッダーnのキー
    6. 現在状態取得WebAPIのヘッダーnの値
    7. 現在状態取得WebAPIにて「施錠済」を表すパラメータのキー
    8. 現在状態取得WebAPIにて「施錠済」を表すパラメータの値
    9. 現在状態取得WebAPIにて「解錠済」を表すパラメータのキー
    10. 現在状態取得WebAPIにて「解錠済」を表すパラメータの値
    11. 現在状態取得WebAPIにて「作動中」を表すパラメータのキー
    12. 現在状態取得WebAPIにて「作動中」を表すパラメータの値

### ★トグル動作仕様のAPI使用時の設定項目
(施錠動作/解錠動作仕様のAPI使用時は設定不要)
- 鍵の動作設定
    1. 鍵の動作モードを設定する
    2. WebAPI呼び出しURI(トグル動作)
    3. WebAPIのメソッド(トグル動作)
    4. トグル動作WebAPIのパラメータnのキー
    5. トグル動作WebAPIのパラメータnの値
    6. トグル動作WebAPIのヘッダーnのキー
    7. トグル動作WebAPIのヘッダーnの値

### ★施錠動作/解錠動作仕様のAPI使用時の設定項目
(トグル動作仕様のAPI使用時は設定不要)
- 鍵の動作設定
    1. 鍵の動作モードを設定する
    2. WebAPI呼び出しURI(施錠動作)
    3. WebAPIのメソッド(施錠動作)
    4. 施錠動作WebAPIのパラメータnのキー
    5. 施錠動作WebAPIのパラメータnの値
    6. 施錠動作WebAPIのヘッダーnのキー
    7. 施錠動作WebAPIのヘッダーnの値
    8. WebAPI呼び出しURI(解錠動作)
    9. WebAPIのメソッド(解錠動作)
    10. 解錠動作WebAPIのパラメータnのキー
    11. 解錠動作WebAPIのパラメータnの値
    12. 解錠動作WebAPIのヘッダーnのキー
    13. 解錠動作WebAPIのヘッダーnの値

### APIの動作モード
    カスタムAPI機能を使用する場合は動作モードを「カスタムAPI」に設定してください。

### WebAPI呼び出しURI
    WebAPIを呼び出すURIを設定してください。

### WebAPIのメソッド
    WebAPIを使用する際のHTTPメソッドを設定してください。
    GET、POSTの2種類から選択できます。

### WebAPIのパラメータnのキー、WebAPIのパラメータnの値
    WebAPIを使用する際に送信するパラメータを設定してください。
    5つまで設定できます。
```
{
    "WebAPIのパラメータ1のキー": "WebAPIのパラメータ1の値",
    "WebAPIのパラメータ2のキー": "WebAPIのパラメータ2の値",
    "WebAPIのパラメータ3のキー": "WebAPIのパラメータ3の値",
    "WebAPIのパラメータ4のキー": "WebAPIのパラメータ4の値",
    "WebAPIのパラメータ5のキー": "WebAPIのパラメータ5の値"
}
```

### WebAPIのヘッダーnのキー、WebAPIのヘッダーnの値
    WebAPIを使用する際に送信するヘッダーを設定してください。
    5つまで設定できます。
```
{
    "WebAPIのヘッダー1のキー": "WebAPIのヘッダー1の値",
    "WebAPIのヘッダー2のキー": "WebAPIのヘッダー2の値",
    "WebAPIのヘッダー3のキー": "WebAPIのヘッダー3の値",
    "WebAPIのヘッダー4のキー": "WebAPIのヘッダー4の値",
    "WebAPIのヘッダー5のキー": "WebAPIのヘッダー5の値"
}
```
### 現在状態取得WebAPIにて「xxx」を表すパラメータのキー、現在状態取得WebAPIにて「xxx」を表すパラメータの値
    WebAPI送信後、帰ってきたレスポンスのうち、施錠済/解錠済/作動中を表すパラメータ値を設定できます。
    階層が深い場合は「.」で区切ってください。
```
例: response.status
{
    "response": {
        "status": "data"
    }
}
```
